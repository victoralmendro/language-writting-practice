<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Writting Practice - Random Word Picker</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 20px;
        }
        h1 {
            color: #333;
        }
        button {
            padding: 10px 20px;
            background-color: #4CAF50;
            color: white;
            border: none;
            cursor: pointer;
        }
        button:hover {
            background-color: #45a049;
        }
        .result {
            margin-top: 20px;
            font-size: 18px;
            font-weight: bold;
        }
    </style>
    <script src="config.js"></script>
</head>
<body>
    <h1> Practice your writting with the Random Word Picker</h1>
    
    <label for="numWords">How many words do you want to pick?</label>
    <input type="number" id="numWords" name="numWords" min="1" value="3">
    <button id="pickWordsBtn">Pick Words</button>
    
    <div class="result" id="resultArea"></div>

    <script>
        let data = CONFIG.learn;

        for (let index = 0; index < Object.keys(data).length/2; index++) {
            data = shuffleArray(data);
        }
        
        let remainingWords = [...data];

        function pickWords(numWords, allWords) {
            const result = [];

            // Ensure that the number of requested words does not exceed the available total
            numWords = Math.min(numWords, remainingWords.length);

            let pickedWords = [];

            // Pick more words from previously used categories, if necessary
            for (let i = 0; i < numWords; i++) {
                const word = pickWordFromList(remainingWords);
                result.push(word);
                remainingWords = removeWord(remainingWords, word);
            }

            return result;
        }

        function pickWordFromList(list) {
            const randomIndex = Math.floor(Math.random() * list.length);
            return list[randomIndex];
        }

        function removeWord(list, word) {
            return list.filter(item => item !== word);
        }

        function updateUI(result) {
            const resultArea = document.getElementById('resultArea');

            if (result.length === 0) {
                resultArea.innerText = "There are no more words to pick!";
            } else {
                resultArea.innerText = result.toString().replace(",", "; ");
            }
        }

        function shuffleArray(array) {
            for (let i = array.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1)); // Random index from 0 to i
                [array[i], array[j]] = [array[j], array[i]];  // Swap elements
            }
            return array;
        }

        document.getElementById('pickWordsBtn').addEventListener('click', () => {
            const numWords = parseInt(document.getElementById('numWords').value);

            debugger;

            const result = pickWords(numWords, data);
            updateUI(result);
        });
    </script>
</body>
</html>
